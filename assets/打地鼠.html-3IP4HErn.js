import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as t,e as a}from"./app-Cwn01mUg.js";const o={};function r(n,l){return t(),i("div",null,[...l[0]||(l[0]=[a('<h1 id="第一个游戏-《打地鼠》" tabindex="-1"><a class="header-anchor" href="#第一个游戏-《打地鼠》" aria-hidden="true">#</a> 第一个游戏：《打地鼠》</h1><h2 id="_1-创建项目" tabindex="-1"><a class="header-anchor" href="#_1-创建项目" aria-hidden="true">#</a> 1. 创建项目</h2><ul><li><ol><li>打开 Unity Hub 软件，选择新建项目。</li></ol></li><li><ol start="2"><li>项目名称命名为 WhackAMole。</li></ol></li><li><ol start="3"><li>选择采用2D项目模板进行创建。</li></ol></li><li><ol start="4"><li>左下角Project项目文件区，选择一个名为Assets的文件夹。</li></ol></li><li><ol start="5"><li>将Playmaker的插件拖入这个文件夹中，然后进行import安装。</li></ol></li><li><ol start="6"><li>在Playmaker的弹窗中选择install Playmaker，并且选择go ahead。</li></ol></li><li><ol start="7"><li>然后我们就能在Assets文件夹中看到Playmaker的文件夹。</li></ol></li></ul><h2 id="_2-创建场景" tabindex="-1"><a class="header-anchor" href="#_2-创建场景" aria-hidden="true">#</a> 2. 创建场景</h2><ul><li><ol><li>在Assets文件夹上右键，选择Create创建，选择Scene场景，并且重命名场景叫做WhackAMole，并且拖拽到Sence里。</li></ol></li><li><ol start="2"><li>在左侧Hierarchy场景区，选择WhackAMole场景，右键选择2D Object，选择Sprites，选择Square，并且重命名为Ground。</li></ol></li><li><ol start="3"><li>注意，此时在中间的Game窗口中设置窗口大小为1024x768，然后才将这个Square放大到1027x768。</li></ol></li><li><ol start="4"><li>接下来开始创建地洞，也是创建一个Square，并且重命名为Hole，然后再右侧Inspector的Sprite Renderer菜单中修改Color为黑色。</li></ol></li><li><ol start="5"><li>每个地洞中都存在一只地鼠，暂时由文字代替，所以再Hole上右键选择3DObject，选择3D Text，并且重命名为Mole</li></ol><ul><li>在Inspector的Text Mesh菜单中修改Font Size为300，</li><li>Text为地鼠，</li><li>Anchor为Middle center，</li><li>Alignment为Center，</li><li>再到Transfrom中调节Scale缩放值都为0.01。</li></ul></li><li><ol start="6"><li>我们一共需要9个这样的地洞和地鼠，所以我们需要将它们做成一个Perfeb。</li></ol></li><li><ol start="7"><li>在Assets中新建一个文件夹起名为Perfebs，然后将Hole拖拽到这个Perfebs文件夹中，这样我们就创建好了一个perfeb。</li></ol></li><li><ol start="8"><li>接下来我们将这个prefeb复制8份，并且分别命名为Hole01、Hole02、Hole03……Hole08。</li></ol></li><li><ol start="9"><li>这个时候的地鼠是都显示出来的，我们需要隐藏掉它们，双击perfeb，点击Mole，在Inspector的Mole菜单中勾选Hide。</li></ol></li><li><ol start="10"><li>在Sence文件夹中，双击WhackAMole，选择Save保存。</li></ol></li><li><ol start="11"><li>在WhackAMole中右键创建一个GameObject，重命名为HoleManager，在Inspector中reset对象参数。</li></ol></li><li><ol start="12"><li>将这9个Hole拖拽到HoleManager中，此时我们完成了打地鼠的场景创建。</li></ol></li></ul><h2 id="_3-随机显示一个地鼠" tabindex="-1"><a class="header-anchor" href="#_3-随机显示一个地鼠" aria-hidden="true">#</a> 3. 随机显示一个地鼠</h2><h3 id="_3-1-循环获取地洞数组" tabindex="-1"><a class="header-anchor" href="#_3-1-循环获取地洞数组" aria-hidden="true">#</a> 3.1 循环获取地洞数组</h3><ul><li><ol><li>点击HoleManager，在Inspector中点击Add Component，选择Playmaker，此时会载入一个PlaymakerFSM模块。</li></ol></li><li><ol start="2"><li>PlaymakerFSM模块中的edit，会出现playmaker面板，并在里面编写地鼠的逻辑。</li></ol></li><li><ol start="3"><li>要随机生成地鼠，主要分为三个步骤： - 把所有的地洞放在一个数组里；</li></ol><ul><li>随机生成一个数，这个数在0到8之间；</li><li>把地鼠显示出来。</li></ul></li><li><ol start="4"><li>首先，在playmaker面板中，点击New Variable，命名为HoleArray，并且选择Array类型，在Array Type中选择GameObject。</li></ol></li><li><ol start="5"><li>选择State 1，并且在State菜单中重命名为获取子节点数量（父节点是HoleManager），空白处双击，搜索GetChildCount，并且点击Add。</li></ol></li><li><ol start="6"><li>在GetChildCount中，GameObject选择User Owner（对象本身），点击Store Result（存储结果），新建一个变量ChildCount。</li></ol></li><li><ol start="7"><li>在playmaker面板空白处右键新建一个state，起名为循环遍历。</li></ol></li><li><ol start="8"><li>在获取子节点数量模块上右键，选择Add Transition，选择FINISHED，左键按住FINISHED拉出一个箭头指向循环遍历模块。</li></ol></li><li><ol start="9"><li>双击循环遍历模块，在Actions中搜索loop，选择loop，Loops选择上面的存储子节点数量的ChildCount，Store Current Loop选择新建一个LoopIndex变量用来存储循环到第几个Hole的下标，Loop Event选择新建一个LoopEvent。</li></ol></li><li><ol start="10"><li>右键点击循环遍历模块，选择Add Transition，选择LoopEvent。</li></ol></li><li><ol start="11"><li>右键新增一个state，命名为遍历处理，左键按住循环遍历模块拖动箭头指向遍历处理模块，双击遍历处理模块，在Actions中搜索GetChildNum（获取当前子节点），GameObject选择UserOwner，Child Index选择LoopIndex，Store选择新建一个CurrentHole变量，再Actions中搜索Array Add，Array选择Holes，Value选择CurrentHole。</li></ol></li><li><ol start="12"><li>右键遍历处理模块，选择Add Transition，选择FINISHED，指向遍历循环模块。</li></ol></li><li><ol start="13"><li>遍历循环结束了，我们需要给循环遍历模块，选择Add Transition，选择选择FINISHED。</li></ol></li><li><ol start="14"><li>新建一个state，再Actions中搜索Debug Log，改名为遍历完成，Text填写“遍历完成”，勾选Send To Unity Log。</li></ol></li><li><ol start="15"><li>将遍历循环模块的箭头拖动到Debug Log模块上。</li></ol></li></ul><h3 id="_3-2-随机获取一个地洞-并且地洞中显示一个地鼠" tabindex="-1"><a class="header-anchor" href="#_3-2-随机获取一个地洞-并且地洞中显示一个地鼠" aria-hidden="true">#</a> 3.2 随机获取一个地洞，并且地洞中显示一个地鼠</h3><ul><li><ol><li>经历上一个步骤验证过后，我们将遍历完成模块更名为随机生成地鼠，双击空白处，在Actions中搜索Array Get Random，Array选择Holes，Store Value选择新建一个RandomHole变量。</li></ol></li><li><ol start="2"><li>地洞和地鼠属于父子关系，双击空白处，在Actions中搜索Get Child，Game Object选择Specify Game Object再选择RandomHole，Child Name填写Mole，Store Result选择新建一个RandomMole变量。</li></ol></li><li><ol start="3"><li>由于在创建场景的时候将地鼠隐藏了，我们需要激活它，在Actions中搜索Activate Game Object，Game Object选择Specify Game Object再选择RandomHole，Activate是默认勾选的，Recursive取消勾选。</li></ol></li><li><ol start="4"><li>若是运行时，没有正常显示地洞，检查地洞和ground的层级。</li></ol></li></ul><h3 id="_3-3-1秒显示一个地鼠" tabindex="-1"><a class="header-anchor" href="#_3-3-1秒显示一个地鼠" aria-hidden="true">#</a> 3.3 1秒显示一个地鼠</h3><ul><li><ol><li>在随机生成地鼠模块中，双击空白处，在Actions中搜索Send Event，Event Target选择Self，Send Event选择新建一个事件命名为RepeatSelf，Delay选择1（每隔1秒重复一次），右键点击随机生成地鼠模块，选择RepeatSelf并将箭头指向自己。</li></ol></li><li><ol start="2"><li>测试运行过程中，显示地鼠时快时慢，原因在于我们并没有对已经出现地鼠的地洞进行标记，所以我们需要进一步都地洞Perfeb对象进行操作。</li></ol></li><li><ol start="3"><li>双击Hole这个Perfeb，在右侧菜单中点击Add Component，添加一个PlayMakerFSM，并且重命名为Hole，然后在变量菜单中，新建一个Boolean类型的变量命名为地鼠是否显示，用来保存地洞中地鼠的状态，地鼠默认状态是不显示的，所以创建第一个state是地鼠未显示，第二个state是地鼠正在显示，然后我们添加一个Event命名为显示地鼠，并且勾选全局变量，然后再地鼠未显示添加显示地鼠的Event，并且指向地鼠正在显示，在state地鼠正在显示State菜单中，找到并勾选Bool Value。</li></ol></li><li>选中地鼠正在显示，双击空白处，搜索Activate Game Object，Game Object选择Specify Game Object并且将Mole拖进去，Activate勾选，Recursive取消勾选。</li><li>回到HoleManager,移除前面做的获取子节点state和Activate Game Object，然后我们要先判断随机获取的这个地洞是否已经显示过了，所以我们需要获得Boolean变量，双击空白处，搜索Get FSM Bool，并且移动到Array Get Random的下面，Game Object 还是 RandomHole，FSM Name起名叫Hole，Variable name选择输入地鼠是否显示，Store Value选择新建一个变量随机地洞中的地鼠是否显示，双击空白处，搜索选择Bool Test，Bool Variable选择随机地洞中的地鼠是否显示，Is True添加一个事件RepeatSelf（重新获取地洞）。</li><li>双击空白处，选择Send Event，Event Target选择Game Object，Game Object选择Specify Game Object选择RandomHole，Send Event选择显示地鼠</li></ul><h3 id="_3-4-地鼠的消失和死亡" tabindex="-1"><a class="header-anchor" href="#_3-4-地鼠的消失和死亡" aria-hidden="true">#</a> 3.4 地鼠的消失和死亡</h3><ul><li>地鼠的消失与死亡，还是在Hole这个Perfebs中去实现 <ul><li>创建一个地鼠消失的state</li><li>创建一个地鼠定时消失的event，指向地鼠未显示state中</li><li>创建一个地鼠在鼠标点击后消失的event，指向地鼠未显示state中</li></ul></li></ul><h3 id="_4-1-分数" tabindex="-1"><a class="header-anchor" href="#_4-1-分数" aria-hidden="true">#</a> 4.1 分数</h3><ul><li>显示分数的步骤： <ul><li>创建一个Score Text，显示分数</li><li>在Score Text中新建一个分数变量</li><li>地鼠死亡的同时发送一个加一分的全局事件</li><li>ScoreText 监听到加一分事件后分数变量进行+1操作</li></ul></li><li>架构 <ul><li>数据操控 <ul><li><ol><li>接收命令</li></ol></li><li><ol start="2"><li>处理数据</li></ol></li><li><ol start="3"><li>发送事件</li></ol></li></ul></li><li>数据模型 <ul><li><ol><li>创建数据</li></ol></li><li><ol start="2"><li>数据的初始化</li></ol></li></ul></li></ul></li></ul>',16)])])}const c=e(o,[["render",r],["__file","打地鼠.html.vue"]]);export{c as default};
