---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import Hero from '../components/Hero.astro';
import LatestPosts from '../components/LatestPosts.astro';
import { AppConfig } from '../utils/AppConfig';

const allPosts = (await getCollection('blog'))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const latestPosts = allPosts.slice(0, 9);
---

<Layout
  head={{
    title: AppConfig.title,
    description: AppConfig.description
  }}
>
	<Hero />
	<LatestPosts posts={latestPosts} />
</Layout>